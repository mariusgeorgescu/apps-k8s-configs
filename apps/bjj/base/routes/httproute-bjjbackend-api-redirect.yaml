# HTTPRoute: rutează traficul către Service-ul bjjbackend.
apiVersion: gateway.networking.k8s.io/v1 # Versiunea API pentru HTTPRoute
kind: HTTPRoute # Tipul resursei este HTTPRoute
metadata: # Metadate Kubernetes
  name: httproute-bjjbackend-api-redirect # Numele rutei de redirect
  namespace: bjj # Namespace-ul resursei
spec: # Specificația rutei
  parentRefs: # Gateway/Listener la care se atașează ruta
  - name: gateway-bjjbackend-api # Numele Gateway-ului părinte
    sectionName: http # Atașează pe listener-ul HTTP pentru a redirecționa către HTTPS
  hostnames: # Domeniile pentru care se aplică ruta
  - bjjbackend.cardano.vip # Domeniul aplicației
  rules: # Reguli de rutare
  - filters: # Filtre aplicate request-urilor
    - type: RequestRedirect # Tipul filtrului: redirect
      requestRedirect: # Config redirect
        scheme: https # Forțează HTTPS
        statusCode: 301 # Status code permanent redirect
