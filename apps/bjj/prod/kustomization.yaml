# Kustomization overlay "prod" pentru aplicația bjjbackend: referă baza și fixează imaginile containerelor.
apiVersion: kustomize.config.k8s.io/v1beta1 # Versiunea API pentru Kustomize
kind: Kustomization # Declară acest fișier ca o Kustomization
namespace: bjj # Namespace implicit pentru resurse namespaced
namePrefix: prod- # Prefixează toate resursele cu "prod-"
resources: # Manifeste incluse din baza aplicației + resurse only-in-prod
- ../base # Include toate resursele din base
- networking/certificates/certificate-bjjbackend-cardano-vip.yaml # Certificat TLS (prod)
- networking/certificates/certificate-grafana-cardano-vip.yaml # Certificat TLS pentru Grafana (prod)
- networking/gateways/gateway-bjjbackend-api.yaml # Gateway (prod)
- networking/routes/httproute-bjjbackend-api-redirect.yaml # HTTP->HTTPS redirect (prod)
- networking/routes/httproute-bjjbackend-api.yaml # Ruta principală (prod)
- networking/routes/httproute-grafana-prod.yaml # Ruta pentru Grafana (prod)
- policies/pdb-bjjbackend-api.yaml # PDB (prod)
- policies/networkpolicy-bjj-egress.yaml # NetworkPolicy (prod)
patchesStrategicMerge: # Patches pentru a adăuga atribute non-minime
- patches/deployment-bjjbackend-api.yaml
- patches/configmap-bjjbackend.yaml
- patches/pvc-bjjbackend-lookup.yaml
images: # Re-scrieri pentru imaginile containerelor
- name: mariusgeorgescu/bjjserver # Numele imaginii principale
  newTag: 988d3e55 # Tag-ul folosit în producție
- name: mariusgeorgescu/chainsync # Imaginea chain-sync
  newTag: chainsync # Tag-ul folosit în producție

