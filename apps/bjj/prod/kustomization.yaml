# Kustomization overlay "prod" pentru aplicația bjjbackend: referă baza și fixează imaginile containerelor.
apiVersion: kustomize.config.k8s.io/v1beta1 # Versiunea API pentru Kustomize
kind: Kustomization # Declară acest fișier ca o Kustomization
namespace: bjj # Namespace implicit pentru resurse namespaced
namePrefix: prod- # Prefixează toate resursele cu "prod-"
resources: # Manifeste incluse din baza aplicației + resurse only-in-prod
- ../base # Include toate resursele din base
- networking/certificates/certificate-bjjbackend-cardano-vip.yaml # Certificat TLS (prod)
- networking/gateways/gateway-bjjbackend-api.yaml # Gateway (prod)
- networking/routes/httproute-bjjbackend-api-redirect.yaml # HTTP->HTTPS redirect (prod)
- networking/routes/httproute-bjjbackend-api.yaml # Ruta principală (prod)
- policies/networkpolicy-bjj-egress.yaml # NetworkPolicy (prod)
- policies/pdb-bjjbackend-query-api.yaml # PDB (prod)
- policies/pdb-bjjbackend-interaction-api.yaml # PDB (prod)
- secrets/secret-bjjbackend.yaml # Secret specific environment-ului (prod)
patchesStrategicMerge: # Patches pentru a adăuga atribute non-minime
  - patches/configmap-bjjbackend.yaml
  - patches/deployment-bjjbackend-query-api.yaml 
  - patches/deployment-bjjbackend-interaction-api.yaml
images: # Re-scrieri pentru imaginile containerelor
  - name: mariusgeorgescu/bjj-interaction-api # Numele imaginii principale
    newTag: 0bef711 # Tag-ul folosit în dezvoltare
  - name: mariusgeorgescu/bjj-query-api # Imaginea query-api
    newTag: 0bef711 # Tag-ul folosit în dezvoltare
  - name: mariusgeorgescu/bjj-chainsync # Imaginea chain-sync
    newTag: 0bef711 # Tag-ul folosit în dezvoltare
