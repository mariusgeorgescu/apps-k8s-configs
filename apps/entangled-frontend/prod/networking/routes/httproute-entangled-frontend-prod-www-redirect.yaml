# HTTPRoute to serve www.e7d.tech with same content as e7d.tech.
# Note: Traefik Gateway API doesn't support RequestRedirect filter properly,
# so we serve the same content on both domains instead of redirecting.
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: httproute-entangled-frontend-prod-www-redirect
  namespace: entangled-frontend
spec:
  parentRefs:
  - name: prod-gateway-entangled-frontend-prod-web
    namespace: entangled-frontend
    sectionName: https-www-e7d-tech
  hostnames:
  - www.e7d.tech
  rules:
  - matches:
    - path:
        type: PathPrefix
        value: /
    backendRefs:
    - name: prod-service-entangled-frontend-web
      port: 80

