# ClusterIssuer pentru Let's Encrypt cu HTTP-01 challenge (staging - pentru teste)
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-http01-staging
spec:
  acme:
    # Email pentru notificări ACME
    email: georgescumarius@live.com
    # Server Let's Encrypt staging (nu produce certificate valide public)
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    privateKeySecretRef:
      # Secret pentru cheia privată ACME staging
      name: letsencrypt-http01-staging
    solvers:
    # Solver HTTP-01 folosind Gateway API
    - http01:
        gatewayHTTPRoute:
          # Specifică Gateway-ul care va servi challenge-urile HTTP-01
          parentRefs:
          - name: gateway-bjjbackend-api
            namespace: bjj
            # Folosește listener-ul HTTP (port 80)
            sectionName: http
